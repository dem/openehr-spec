h1. 5 Структура пакетов openEHR

h2. 5.1 Общие сведения

Рисунок 8 иллюстрирует структуру пакетов формализованных спецификаций openEHR. Три основных пакета: @rm@, @am@ и @sm@. Все пакеты, описывающие детали моделей, находятся внутри данных пакетов, которые так же могут быть пространствами имен. Они концептуально объединены в пространство имен @org.openehr@, которое может быть представлено в UML как вложенные пакеты. В некоторых реализациях (например, Java), пространство имен @org.openehr@ может использоваться в тексте программ.

p=. !8.png!

p=. *Рисунок 8* Общая структура пакетов openEHR

Одна из важных проектных целей openEHR заключается в создании согласованной, целостной и многократно используемой системы типов для научных и медицинских вычислений. Таким образом, ‘ядро’ (core) в RM (нижний слой на схеме) содержит идентификаторы, типы данных, структуры данных и различные общие шаблоны проектирования, которые могут быть использованы в верхних слоях RM, а так же в пакетах AM и SM. Рисунок 9 показывает отношения между пакетами. Верхние пакеты зависят от нижних.

p=. !9.png!

p=. *Рисунок 9* Структура пакетов openEHR

h2. 5.2 Базовая модель (Reference Model, RM)

Каждый пакет определяет локальный контекст для классов. На рисунке 10 показана структура пакета RM. Неофициально пакет разделен на "предметную область (domain)", “паттерны (patterns)” и “ядро (core)”. Пакеты в последней группе универсальные, они используются всеми моделями openEHR во всех внешних пакетах. Вместе они реализуют: идентификацию, доступ к источникам знаний, типы и структуры данных, семантику версий и поддержку архетипизации. Пакеты в первой группе определяют семантику типов медицинской информации организационного уровня, включая ЭМК (EHR) и демографию.

Каждый внешний пакет на рисунке 10 соответствует одному документу[5] спецификации openEHR, описывающему "информационную модель" (IM). Структура пакетов может быть воспроизведена в любых ITS, например в виде XML схемы, реализована на языках программирования таких как Java, C#, и Eiffel, или представлена с помощью WSDL, IDL и .Net.

h3. 5.2.1 Обзор пакетов

В следующих секциях дается краткий обзор пакетов RM.

*Вспомогательная информационная модель (Support Information Model)*
В пакете описываются самые основные понятия, необходимые для других пакетов. Он состоит из следующих пакетов: Определения (Definitions), Идентификация (Identification), Терминологии (Terminology) и Измерения (Measurement). Семантика определенная в этих пакетах позволят всем другим моделям использовать идентификаторы и иметь доступ к сервисам данных, таким как терминология и другим справочным данным. Вспомогательный пакет (support package) включает в себя специальный пакет @assumed_types@, который описывает базовые типы из внешних систем, допустимые для использования в openEHR; этот пакет представляет собой руководство для интеграции моделей openEHR в надлежащем виде в технологии реализации.

*Информационная модель типов данных (Data Types Information Model)*
Список четко определенных типов данных, который лежит в основе всех других моделей, а также предоставляет ряд общих и клинических типов данных, необходимых для описания всех видов медицинской информации. В базовой модели определены следующие категории типов данных.

* __Текстовые (Text)__: простой текст, кодированный текст, параграфы.
* __Количественные (Quantities)__: любые упорядоченные величины, включая упорядоченные значения (ordinal, используется для представления символьных упорядоченных значений таких как “+”, “++”, “+++”), измеряемые величины со значениями и единицами измерения, и так далее.
* __Дата/время (Date/times)__: дата, время, дата-время, и типы частичной даты/времени.
* __Инкапсулированные данные (Encapsulated data)__: мультимедиа, интерпретируемое содержимое.
* __Базовые типы (Basic types)__: булевые, переменные состояния.

*Информационная модель структур данных*
В информационной модели openEHR, общие структуры данных используются для представления содержания, структура которого будет задана в архетипах. Ниже представлены эти структуры данных.

* __Одиночный элемент (Single)__: отдельный элемент, используемый для хранения единственного значения, такого, как рост или вес.
* __Список (List)__: линейный список именованных элементов, таких как множество результатов исследований на патологические изменения.
* __Таблица (Table)__: табличные значения, с неограниченными или ограниченными размерами таблиц, с поименованными и отсортированными колонками, и возможно поименованными строками.
* __Дерево (Tree)__: древовидные данные, которые могут быть представлены в виде вложенных списков, или других вложенных структур.
* __История (History)__: временной ряд, в котором каждая точка времени может содержать структуру данных, любой сложности, из описанных выше типов. Поддерживаются точка и интервал.

p=. !10.png!

p=. *Рисунок 10* Структур пакета org.openehr.rm

*Информационная модель общего назначения (Common Information Model)*
Некоторые понятия повторяются в пакетах верхнего уровня. Классы @LOCATABLE@ и @ARCHETYPED@ обеспечивают связь между информационной моделями и моделями архетипов. Классы @ATTESTATION@ и @PARTICIPATION@ являются общими понятиями и присутствуют в различных моделях архетипов. Пакет @change_control@ определяет формальную модель управления изменениями и версиями, которая применима к любому сервису, предоставляющему предыдущие состояния информации, в частности сервисы демографии и ЭМК. Ключевые понятия версионирования в openEHR описаны в разделе 8 на стр. 42.

*Информационная модель безопасности (Security Information Model)*
Информационная модель безопасности определяет семантику контроля доступа и  конфиденциальности персональной информации в ЭМК.

*Информационная модель ЭМК (EHR Information Model)*
Информационная модель ЭМК определяет ограничение и основные понятия @EHR@, @COMPOSITION@, @SECTION@, и @ENTRY@. Эти классы являются базовыми компонентами ЭМК и прямо соответствуют классам, с теми же именами в CEN EN13606:2005  и довольно близко к "уровням" с теми же именами в "HL7 Clinical Document Architecture (CDA) release 2.0".

*Инфомрационная модель выгрузки из ЭМК (EHR Extract Information Model)*
В ИМ выгрузки из ЭМК описывается создание выгрузки из ЭМК из @COMPOSITION@, демографической информации, а так же структур контроля доступа к ЭМК. Поддерживается несколько форм выгрузки данных, включая “полностью по openEHR”, упрощенную форму для интеграции с CEN EN13606 и выгрузка для синхронизации openEHR/openEHR.

*Интеграционная информационная модель (Integration Information Model)*
В интеграционной модели определен класс @GENERIC_ENTRY@ и подтип @ENTRY@, используемый для представления в свободной форме унаследованных или внешних данных в виде дерева. Тип Entry имеет собственные архетипы, известные как "интеграционные архетипы", они могут быть использованы совместно с клиническими архетипами в качестве основы для инструментальных интеграционных систем. Подробная информация приведена в разделе 14 на стр. 73.

*Демографическая информационная модель (Demographics Information Model)*
В демографической модели определены общие понятия @PARTY@, @ROLE@ и сопутствующие понятия, такие как контактный адреса. В модель архетипов определена семантика ограничений для @PARTY@, позволяющая создать архетипы для персоналий, организации, ролей и отношений между ролями. Такой подход дает гибкий способ включения произвольных демографических атрибутов из стандарта OMG HDTF PIDS.

*Процессная информационная модель (будет в будущем) (Workflow Information Model, future)*
Процесс это динамическая сторона лечебно-диагностического процесса и состоит из моделей описания процессов, таких как повторные вызовы, а так же любой процесс оказания медицинской помощи в виде исполнение врачебных руководств.

h2. 5.3 Модель архетипов (Archetype Model, AM)

Пакет openEHR @am@ содержит модели, необходимые для описания семантики архетипов и шаблонов, а также их использование в рамках openEHR. Пакет включает язык описания архетипов (ADL, Archetype Definition Language - в виде спецификации синтаксиса), пакеты @archetype@ и @template@, определяющие объектно-ориентированную семантику архетипов и шаблонов, а также пакет @openehr_profile@, который определяет профиль для использования openEHR (и других медицинских вычислений). Внутренняя структура пакета @am@ показана на рисунке 11.

p=. !11.png!

p=. *Рисунок 11* Структура пакета org.openehr.am

h2. 5.4 Сервисная модель (Service Model, SM)

Сервисная модель openEHR включает в себя описание основных сервисов в медицинской информационной среде, сконцентрированных вокруг ЭМК. Пакет показан на рисунке 12. Набор сервисов несомненно будет развиваться с течением времени, так что эта схема не должна рассматриваться как окончательная.

*API к виртуальной ЭМК (Virtual EHR API)*
API к виртуальной ЭМК определяет интерфейс для доступа к данным в ЭМК на уровне композиции и ниже. С ее помощью программы создают новую информацию в ЭМК,  получают части существующих ЭМК и изменяют их. API позволяет управлять данными, любой степени детализации, на основе архетипов. Изменения в ЭМК сохраняются через сервис ЭМК.

*Модель сервиса ЭМК (EHR Service Model)*
Модель сервиса ЭМК определяет интерфейс для доступа к электронной медицинской карте. Уровень детализации - контрибьюции (сontributions) и композиции (compositions) openEHR, т.е. интерфейс контроль версий / изменений.

Часть модели определяет семантику запросов на стороне сервера, т.е. запросы, которые обрабатывают большие объемы данных, и как правило, возвращают небольшие агрегированные ответы, такие, как средние значения, или набор идентификаторов пациентов, соответствующих определенному критерию.

*Сервисная модель архетипов (Archetype Service Model)*
В сервисной модели архетипов определен интерфейс к онлайн хранилищу архетипов, и может использоваться как приложениями с графическим интерфейсом для просмотра человеком, а также для доступа из других программных сервисов, таких как сервис ЭМК.

*Модель интерфейса к терминологии (Terminology Interface Model)*
Интерфейс к терминологии предоставляет средства доступа для других сервисов к любой терминологии, доступной в медицинской информационной среде, в том числе основные классификаторы, такие как МКБ* (ICDx) и ICPC, а также более продвинутые терминологии на основе онтологии. Следуя концепции разделения ответственности для связи система-система, терминологический интерфейс позволяет абстрагироваться от различных архитектур каждой терминологии, позволяя другим сервисам получить к ним доступ стандартным способом. Сервис терминологий это шлюз для онтологических и терминологических сервисов знаний в информационной среде, которые наряду с сервисами для доступа к руководствам, лекарственным и другим "справочным данным" позволяют делать логические выводы и обеспечивает помощь в принятия решений.

p=. !12.png!

p=. *Рисунок 12* Структура пакета org.openehr.sm

fn5. За исключением пакетов EHR и Composition, которые описаны в документе "Базовая модель ЭМК (EHR Reference Model)"
