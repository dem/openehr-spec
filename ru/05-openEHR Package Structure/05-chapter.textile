h1. 5 Структура пакетов openEHR

h2. 5.1 Общие сведения

Рисунок 8 иллюстрирует структуру пакетов формальных спецификаций openEHR. Три основных пакета: @rm@, @am@ и @sm@. Все пакеты, детально описывающие соответствующие модели, находятся внутри данных пакетов, которые так же являются пространствами имен. Они концептуально объединены в пространство имен @org.openehr@, которое может быть представлено в UML вложенными пакетами. В некоторых реализациях (например, в Java), пространство имен @org.openehr@ может использоваться в тексте программ.

p=. !8.png!

p=. *Рисунок 8* Общая структура пакетов openEHR

Одна из важных проектных целей openEHR заключается в создании согласованной, целостной и многократно используемой системы типов для научных и медицинских вычислений. Таким образом, ‘ядро’ (core) в RM (нижний слой на схеме) содержит идентификаторы, типы данных, структуры данных и различные общие шаблоны проектирования, которые могут быть использованы в верхних слоях RM, а так же в пакетах AM и SM. Рисунок 9 показывает отношения между пакетами. Верхние пакеты зависят от нижних.

p=. !9.png!

p=. *Рисунок 9* Структура пакетов openEHR

h2. 5.2 Базовая модель (Reference Model, RM)

Каждый пакет определяет локальный контекст для классов. На рисунке 10 показана структура пакета RM. Неформально пакет разделен на "предметную область (domain)", “паттерны (patterns)” и “ядро (core)”. Пакеты в последней группе универсальные. Они используются всеми моделями openEHR во всех внешних пакетах. Вместе они описывают идентификацию, доступ к источникам знаний, типы и структуры данных, семантику версий и поддержку архетипизации. Пакеты в первой группе определяют семантику типов медицинской информации организационного уровня, включая ЭМК (EHR) и демографию.

Каждый внешний пакет на рисунке 10 соответствует одному документу[5] спецификации openEHR, и в целом они описывают "информационную модель" (IM). Структура пакетов может быть воспроизведена в любых ITS, например в виде XML схемы, реализована на языках программирования таких как Java, C#, и Eiffel, или представлена с помощью WSDL, IDL и .Net.

h3. 5.2.1 Обзор пакетов

В следующих секциях дается краткий обзор пакетов RM.

*Вспомогательная информационная модель (Support Information Model)*
В пакете описываются самые основные понятия, необходимые для других пакетов. Он состоит из следующих пакетов: Определения (Definitions), Идентификация (Identification), Терминологии (Terminology) и Измерения (Measurement). Семантика, определенная в этих пакетах, позволяет всем другим моделям использовать идентификаторы и иметь доступ к сервисам знаний, например, к терминологическому сервису и к другим справочным данным. Вспомогательный пакет (support package) включает в себя специальный пакет @assumed_types@, который описывает базовые типы из внешних систем, допустимые для использования в openEHR; этот пакет представляет собой руководство для интеграции моделей openEHR и системы типов из технологии реализации.

*Типы данных информационной модели (Data Types Information Model)*
Список четко определенных типов данных, который лежит в основе всех других моделей, а также содержит ряд общих и клинических типов данных, необходимых для описания всех видов медицинской информации. В базовой модели определены следующие категории типов данных.

* __Текстовые (Text)__: простой текст, кодированный текст, параграфы.
* __Количественные (Quantities)__: любые упорядоченные величины, включая порядковые значения (ordinal, используется для представления символьных упорядоченных значений таких как “+”, “++”, “+++”), измеряемые величины со значениями и единицами измерения, и так далее.
* __Дата/время (Date/times)__: дата, время, дата-время, и типы частичной даты/времени.
* __Инкапсулированные данные (Encapsulated data)__: мультимедиа, интерпретируемое содержимое (parsable content).
* __Базовые типы (Basic types)__: булевые, переменные состояния.

*Cтруктуры данных информационной модели*
В информационной модели openEHR, общие структуры данных используются для выражения содержания, структура которого будет задана в архетипах. Ниже представлены эти структуры данных.

* __Одиночный элемент (Single)__: отдельный элемент, используемый для хранения единственного значения, такого, как рост или вес.
* __Список (List)__: линейный список именованных элементов, таких как множество результатов исследований на патологические изменения.
* __Таблица (Table)__: табличные значения, с неограниченными или ограниченными размерами таблиц, с поименованными и отсортированными колонками, и возможно поименованными строками.
* __Дерево (Tree)__: древовидные данные, которые могут быть представлены в виде списка списков или другими вложенными структурами.
* __История (History)__: временной ряд, в котором каждая точка времени может содержать структуру данных любой сложности из описанных выше типов. Поддерживаются точка и интервал.

p=. !10.png!

p=. *Рисунок 10* Структур пакета org.openehr.rm

*Общие понятия в информационной модели (Common Information Model)*
Некоторые понятия требуются в разных пакетах верхнего уровня. Классы @LOCATABLE@ и @ARCHETYPED@ обеспечивают связь между моделью архетипов и информационной моделью. Классы @ATTESTATION@ и @PARTICIPATION@ являются общими понятиями и могут присутствовать в других базовых моделях. Пакет @change_control@ задает формальную модель управления изменениями и версиями, которую можно применить к любому сервису, предоставляющему предыдущие состояния информации, в частности к сервису демографии и ЭМК. Ключевые понятия версионирования в openEHR описаны в разделе 8 на стр. 42.

*Безопасность в информационной модели (Security Information Model)*
В ней определены понятия контроля доступа и  конфиденциальности персональной информации в ЭМК.

*Информационная модель ЭМК (EHR Information Model)*
Информационная модель ЭМК определяет последовательность включения и контекстную семантику для основных понятий @EHR@, @COMPOSITION@, @SECTION@, и @ENTRY@. Эти классы являются крупными компонентами ЭМК и прямо соответствуют классам, с теми же именами в CEN EN13606:2005 (ГОСТ Р ИСО/ТС 13606) и находятся довольно близко к "уровням" с теми же именами в "HL7 Clinical Document Architecture (CDA) release 2.0".

*Информационная модель экспорта из ЭМК (EHR Extract Information Model)*
В ней описана сборка экстракта из ЭМК, состоящей из @COMPOSITION@, демографической информации, а так же структур контроля доступа к ЭМК. Поддерживается несколько форм выгрузки данных: “полностью по openEHR”, упрощенная форма для интеграции с CEN EN13606 (ГОСТ Р ИСО/ТС 13606) и экстракт для синхронизации openEHR/openEHR.

*Интеграционная информационная модель (Integration Information Model)*
В интеграционной модели определен класс @GENERIC_ENTRY@ и подтип @ENTRY@, используемый для представления в свободной форме унаследованных или внешних данных в виде дерева. Тип Entry имеет собственные архетипы, известные как "интеграционные архетипы", они могут быть использованы совместно с клиническими архетипами в качестве основы для интеграции систем с помощью инструментов моделирования. Подробная информация приведена в разделе 14 на стр. 73.

*Демографическая информационная модель (Demographics Information Model)*
В демографической модели определены общие понятия @PARTY@, @ROLE@ и сопутствующие понятия, такие как контактные адреса. В модели архетипов определена семантика ограничений для @PARTY@, позволяющая создать архетипы для персоналий, организации, ролей и отношений между ролями. Такой подход дает гибкий способ включения произвольных демографических атрибутов из стандарта OMG HDTF PIDS.

*Информационная модель процессов (будет в будущем) (Workflow Information Model, future)*
Процесс это динамическая сторона лечебно-диагностического процесса, которая состоит из моделей описания процессов, таких как повторные вызовы, а так же любой процесс оказания медицинской помощи в виде исполнение врачебных руководств.

h2. 5.3 Модель архетипов (Archetype Model, AM)

Пакет openEHR @am@ содержит модели, описывающие семантику архетипов и шаблонов, и их использование в рамках openEHR. В пакет включен язык описания архетипов (ADL, Archetype Definition Language - в виде спецификации синтаксиса), пакеты @archetype@ и @template@, определяющие объектно-ориентированную семантику архетипов и шаблонов, а также пакет @openehr_profile@, который определяет профиль для использования openEHR (есть и другие профили из области медицинской информатики). Внутренняя структура пакета @am@ показана на рисунке 11.

p=. !11.png!

p=. *Рисунок 11* Структура пакета org.openehr.am

h2. 5.4 Сервисная модель (Service Model, SM)

Сервисная модель openEHR включает в себя описание основных сервисов в медицинской информационной среде, сосредоточенных вокруг ЭМК. Пакет показан на рисунке 12. Набор сервисов несомненно будет развиваться с течением времени, поэтому данная схема не должна рассматриваться как окончательная.

*API к виртуальной ЭМК (Virtual EHR API)*
API к виртуальной ЭМК определяет интерфейс для доступа к данным в ЭМК на уровне композиции и ниже. С ее помощью программы создают новую информацию в ЭМК, получают части существующих ЭМК и изменяют их. API позволяет управлять данными любой степени детализации на основе архетипов. Изменения в ЭМК сохраняются через сервис ЭМК.

*Модель сервиса ЭМК (EHR Service Model)*
Модель сервиса ЭМК определяет интерфейс для доступа к электронной медицинской карте. Уровень детализации - контрибьюции (сontributions) и композиции (compositions) openEHR, включая интерфейс для контроля версий и изменений.

В одной из частей модели определяется семантика запросов на стороне сервера, т.е. запросов для обрабатки больших объемов данных, как правило, возвращающих небольшое количество агрегированных данных. Например, среднее значение показателя или набор идентификаторов пациентов, соответствующих определенному критерию.

*Сервисная модель архетипов (Archetype Service Model)*
В сервисной модели архетипов определен интерфейс доступа к онлайн хранилищу архетипов. Его могут использовать люди для просмотра архетипов с помощью GUI приложений. Также сервис  может быть использован в других программных средствах, например в сервисе ЭМК.

*Модель интерфейса доступа к терминологиям (Terminology Interface Model)*
Интерфейс к терминологиям дает средства доступа для других сервисов к любым терминологиям в медицинской информационной среде, в том числе к основным классификаторам: МКБ* (ICDx) и ICPC, а также более продвинутым терминологиям на основе онтологии. Следуя парадигме разделения ответственности в контексте системы систем, терминологический интерфейс позволяет абстрагироваться от различных архитектур каждой терминологии, позволяя другим сервисам получить к ним доступ стандартным способом. Сервис терминологий это шлюз для онтологических и терминологических сервисов знаний в информационной среде. Вместе с сервисами для доступа к руководствам, лекарственным и другим "справочным данным" терминологический сервис дает возможность делать обоснованные выводы и обеспечивает поддержку принятия решений.

p=. !12.png!

p=. *Рисунок 12* Структура пакета org.openehr.sm

fn5. За исключением пакетов EHR и Composition, которые описаны в документе "Базовая модель ЭМК (EHR Reference Model)"
