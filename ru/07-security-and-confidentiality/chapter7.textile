h1. 7 Безопасность и Конфиденциальность

h2. 7.1 Требования 

**Безопасность, конфиденциальность и согласия**
Безопасность (возможность ограничить тех, кто смотрит персональные данные) и конфиденциальность (обязательство  других уважать персональные данные) главная проблема отношений пользователей к системам ЕМК. Общепринято что предоставленная информация (либо непосредственно, либо через обследования, либо через анализ образцов) доверяется пациентом медицинским специалистом в процессе медицинского случая должна быть передана или быть доступна с согласия пациента; проще говоря: __обмен данных должен контролироваться согласием пациента__. Более комплексные требования для некоторых пациентов позволяет разграничить доступ  __к частям__ его ЭМК, для примера, относительно открытые права доступа для большинства медицинских записей, но ограничен доступ к информации о сексуальном здоровье и психических заболеваний. 
Взаимосвязанность медицинской информации может этот затруднить. Для примера список назначенных медицинских препаратов зависит от условия скрыт ли диагноз, который нужен для предоставления безопасного лечения, и многие медицинские работники необходимо видеть невозможность текущих назначений(и аллергии), и это весьма проблематично даже для базового хода.

**Требования медицинских учреждений**
С другой стороны, клинические специалисты оказывая помощь, хотят быстрый доступ к относящимся к пациенту данным, и должны быть уверенны что то, что они видят на экране должно точно передавать 
уверен, что то, что они видят на экране точное это именно то что до них было внесено в систему о пациенте.  
Персоналу оказывающий уход иногда необходим экстренный доступ к медицинским записям (случаи не относящиеся к повседневному уходу); на такой доступ должно быть общее согласие, т.к. не известно когда он может понадобиться.

Исследователи в области здравоохранения часто хотят доступ к данным большого числа людей с целью оценки качества ухода и его улучшения (исследование состояния клиник) и для целей изучения. Обеспечение эффективной помощи и поддержки текущих медицинских исследований, следовательно, должны функционировать в системе с позволения пациента.

**Настройка контроля доступа**
В теории права доступа к информации должны легко настраиваться пациентом или клиническим специалистом. В некоторых случаях это может быть сделано прямым назначение, на пример пациент может указать своего постоянного врача общей практики. Потенциально могут быть сделаны исключения для такого способа, например если у пациента плохие личные отношения с прошлым доктором. Однако вскоре становиться трудно каждый раз определять конкретного человека который имеет доступ, особенно если человеку нужно обратиться в больницу, где много персонала и/или нет предварительно установленных связей. Появление системы электронного назначения и электронных аптек принесёт ещё больше медицинских и близких с медициной сотрудников в матрицу электронного здоровья, что делает систему индивидуального назначения прав невозможной. Более того, существует большая и постоянно растущая категория "очень мобильных" людей (военных, артистов, работников неправительственных организаций, международных бизнесменов, спортсменов... ) которые не могут предсказать даже страну в которой им может понадобиться помощь. В результате, необходимость указывать права доступа по наименованию или по роли неизбежно.

**Проблема ролей**
Одной из сложных задач для осуществления контроля доступа к медицинской информации является определение «ролей», т.е. статус пользователей медицинской записи при предоставленном доступе. Важно, чтобы роли были установлены заранее. Например, ярлыки "медсестра", "врач общей практики" и "психиатр" могут относительно легко присваивается конкретным лицам. Разные типы ярлыков могут иметь больший приоритет для различения между (для примера) главным лечащим врачем, других медицинских сотрудников(медицинских сестёр, сиделок) и вспомогательного персонала(например, патологоанатомов, рентгенологов). При взгляде на мир под призмой услуго-ориентированных медицинских услуг, профессиональных уровень медицинских специалистов является менее важным, чем личное отношение пациента к процессу его лечения.

Это не всегда ясно как люди могут в любой момент могут находятся в любой из этих категорий, или как эти термины могут быть определены в разным местах и странах. Реально, оценка категории ролей, такие как "ухаживающий персонал", в частности медсестра в отделении должны определяться в медицинской организации каждый день, а не в медицинской карте пациента. Решение о доступе к информации в медицинской карте должно зависеть от знаний поставщика услуг о своём персонале, который вовлечён в уход за пациентом.

Контроль доступа основанный на роли осложняется фактом временной замены по причине болезни  или отпуска, или роль изменяется в связи с нехваткой персонала. Кроме того, если у врача есть секретарь, то и для него требуется доступ и возможность обновления его секретной части (относящейся к лечению пациента) информации, т.е. доступ на самом высоком уровне нужно дать кому-то без медицинского образование или непосредственно связанного с помощью пациенты, даже если только в течение 10 минут. Любая ролевая система учитывет суровую реальность медицинской помощи в мире, а не исключительно теоретические принципы.

**Удобство использования**
Удобство использования механизмов безопасности и конфиденциальности является ключевым требованием к архитектуре медицинских записей. Некоторые элегантные решения точного контроля доступа разработанные экспертами по безопасности не пригодны для использования в связи с тем что занимают слишком много времени для изучения их пациентом или доктором, либо слишком много времени чтобы их выполнять, или же слишком сложны чтобы их возможно было использовать в программном обеспечении.

В следующих разделах описана поддержка требований медицинской карты к основам безопасности и конфиденциальности в openEHR.

h2. 7.2 Угрозы Безопасности и Конфиденциальности

Любая модель, такая как безопасность и конфиденциальность, поддерживаемая электронной историей болезни, должна основываться на понимании предполагаемых угроз. Не в даваясь в подробности, угрозы безопасности учтённые в openEHR включают в себя (здесь "неуместным" является все, на что не было или не будет согласия пациента):

* человеческие ошибки в идентификации пациентов, что приводит к неправильным объединение данных о состоянии здоровья одного пациента с другим. Неправильная идентификация может привести к тому, что данные одного пациента попадут в медицинскую карту другого пациента (что приводит к нарушении конфиденциальности и, возможно, клинических ошибок), или созданию новой карты, вместо записи в существующую (что приведёт к появлению двух и более неполных карт);
* несанкционированный доступ со стороны врачей или других работников здравоохранения (в том числе любой работник больницы) не участвующим в уходе за пациентов в данный момент;
* несанкционированный доступ других лиц, знающих пациента, например, членов семьи;
* несанкционированный доступ к медицинским данным корпораций или других организаций, напрмер, в цели страховой дискриминации;
* вредоносная кража или доступ к медицинским данным (например, знаменитостей или политикам) с целью получения прибыли или иных личных побуждений;
* общие угрозы целостности данных и их доступности, такие как вирусы, черви, атаки отказа в обслуживании;
* сбои в программном обеспечении (в результате ошибок, неправильной конфигурации, ошибки взаимодействия и т.д.) вызывающие искажение данных или неправильное отображение иди вычисления в результате критических проблем.

Главное при проектировании дизайн механизмов поддержки безопасности, конфиденциальности и целостности данных нужно иметь ввиду: вероятность того или иного метода несанкционированного доступа пропорционально ценности информации и обратно пропорционально стоимости доступа.
Перефразируя письмо в БАМ Росс Анедрсона[72] в безопасности клинических данный, для получения доступа, преступник попробует найти простейший, дешёвый и быстры способ, что в большинстве случаев будет подкуп или кража с взломом, чем технологии в стиле Джеймса Бонда. openEHR позволяет использовать эти принципы путём относительно простых механизмов, которые дёшевы в реализации, но делает злоупотребление довольно сложным, без ущерба для доступности. 

fn72. см. например, Ross Anderson - "Security in Clinical Information Systems" по адресу "http://www.cl.cam.ac.uk/users/rja14/policy11/policy11.html":http://www.cl.cam.ac.uk/users/rja14/policy11/policy11.html.

h2. 7.3 Решения Предоставленные openEHR

h3. 7.3.1 Обзор

Много из конкретных механизмов, касающихся безопасности можно найти в окружающих системах, а не в таких моделях как openEHR, в частности осуществляющие аутентификацию, контроль доступа и шифрование. Спецификация openEHR и реализация основных компонентов явно не определяет многие конкретные механизмы, так как существует вариативность требований для разных сторон - защищённая локальная сеть требует минимальную внутреннюю безопасность, в то время как веб-сервисы для доступа к медицинским записям, скорее всего, имеют совершенно другие требования.
OpenEHR поддерживает ключевые требования в состоянии, позволяющем создавать систему в соответствии существенно разным тербованиями и конфигурациями, но тем не менее реализовывая  основные принципы стандартным способом. Рисунок 21 иллюстрирует основные меры безопасности, прямо указанных в архитектуре openEHR. Они включают в себя разделение электронной карты/ демографии, а так же всесистемного контроля доступа к медицинской карте. На уровне версий объектов, проверок внесённых изменений (обязательный) имеются цифровых подписи и хэши. В следующих подразделах описываются эти функции более подробно.


!fig21.png(Рисунок 21)!

h3. 7.3.2 Политика безопасности

Само по себе, электронная медицинская карта в openEHR накладывает лишь минимальный профиль политики безопасности, который может рассматриваться в качестве необходимого, но, как правило, не достаточно для развертывания системы (т.е. другие аспекты будут по-прежнему должны быть реализованы в слоях, чья семантика не определены в openEHR) . Следующие принципы политики воплощаются в openEHR.

**Общие принципы**

- Нестираемости: = записи о состоянии здоровья не может быть удалена; логика удаления достигается путём маркировки данных таким образом, чтобы они выглядели удалёнными (реализовано в системе управления версиями).
- Аудиторский след := Все изменения, внесённые в ЭМК, в том числе в содержание объектов, а также статус ЭМК и объекты контроля доступа отслеживаются при помощи идентичности пользователя , отметки времени, причины изменений, по желанию цифровой подписью и соответствующей информации о версии; за одним исключением, где модификатор является пациент, в этом случае будет использован символьный идентификатор (известный как @PARTY_SELF@, в openEHR, см. следующий пункт).
- Анонимность := содержание медицинских записей отдельно от указания демографической информации. Это может быть настроено так, что кража ЭМК не даёт никаких прямых ключ к личности владельца пациента (косвенные подсказки, конечно, сложнее контролировать). Кража идентифицированной ЭМК включает в себя кражу данных из двух сервисов, или даже кражи из двух физических компьютеров, в зависимости от конфигурации развёртывания.

**Контроль доступа**
- Список доступа: = Главный принцип контроля доступа должен быть в "актуальности", как в плане идентификации пользователей (который оказывает помощь пациенту) и время (в течение текущего эпизода оказания медицинской помощи, а также для некоторого разумного, ограниченного времени после этого). Список контроля доступа могут быть определены для ЭМК с указанием как конкретных лиц и категорий, последние из которых могут быть типами ролей или отдельными группами сотрудников.
- Контроль доступа к настройкам доступа := __привратник__ контролирует доступ к параметрам контроля доступа ЭМК. Привратник устанавливается в момент создания ЭМК как один из тех, кто знает о идентичности в ЭМК, как правило, это в пациент психически взрослый, в противном случае родителя, опекуна, адвоката или другого ответственного лица. Привратник определяет, кто может вносить изменения в список управления доступом. Все изменения в списке аудита отслеживаются, как и для обычные данные (достигается за счёт обычного версионирования).
- Конфиденциальность := пациенты могут отмечать Композицию в ЭМК как одну из тех что имеет нескольких уровней секретности. Определение уровни конфиденциальности не привязаны к модели openEHR, а определяется стандартами или соглашений в рамках юрисдикции использования.
- Удобство использования := Общий принцип настройки управления доступа являются "разумные значения по умолчанию", которые работают на большей части информации в ЭМК, большую часть времени. Пациент может установить стандартные настройки для ЭМК, определяющие поведение системы контроля доступа для большинства вопросов доступа. Исключения из политики по умолчанию могут быть добавлены. Такой подход сводит к минимуму необходимость думать о безопасности каждого элемента в ЭМК индивидуально.

Другие принципы политики безопасности, которые должны быть реализованы даже в минимальных развёртываниях EHR, но напрямую не указанные в openEHR включают в себя следующие.  

- 
- Логирование доступа := доступ на чтение к приложению пользователями ЭМК должны быть записаны в журнал самой системой ЭМК. В настоящее время в openEHR не уточняется, модели таких журналов, но это может быть сделать в будущем. Исследования показали, что осознавание того что доступ пользователей записывается является сдерживающим фактором от несанкционированного доступа (особенно там, где другие элементы управления не реализованы). Есть некоторые сторонники того, что даже журналы чтения-доступа должна быть частью ЭМК, но в настоящее время openEHR не поддерживает такой подход.
- Отделение медицинских записей := когда данные пациента оказываются в ЭМК другого пациента, для определения того, кто получил доступ к этим данным и в первую очередь определить какие последующие клинические мышления (например, диагноз, медицинские назначения) были сделаны на основе неверной информацию, нужно смотреть данные о доступе из журнала ЭМК.
- Слияние записей := когда более чем одна ЭМК обнаружилась для одного и того же пациента, и эти данные должны быть объединены в одну карту, списки контроля доступа должны быть пересмотрены и объединены с пациентом и имеющих к нему отношение поставщиков услуг.
- Временное ограничение доступа := Должны быть реализованы механизмы, которые ограничивают время, в течение которого медицинских работники могут видеть карту пациента. Как правило, внешние границы определяются интервалом эпизода оказания медицинской помощи в учреждении, плюс некоторое дополнительное время для завершения лечения или амбулаторного лечения. Начало и конец эпизода отражаются в openEHR как экземпляры ADMIN_ENTRY класса, содержащие детализацию госпитализации и выписки.
- строгая однозначность := если цифровая подпись изменений в карте установлена как   обязательная, то система openEHR поддерживает строгую однозначность содержания. OpenEHR также поддерживается цифровая подпись отдельной информации (выгрузка из ЭМК); вместе с записью в журнал о Выгрузке объектов(Extracts), это может быть использовано, чтобы гарантировать однозначность передачи информация между системами (см. информацию, передаваемую между бекендом и фронтедом той же системы).
- Сертификация := механизм должен обеспечивать такой уровень доверия, чтобы быть официально связан с подписью пользовательским ключём.

Ключевой особенностью политики является то, что она должна масштабироваться для распределенных сред, в которых запись медицинской информации ведётся в нескольких местах посещения больного.

В исследовании BMA Андерсон отмечает, что элементы политики необходимы также для защиты от получения пользователями доступа к огромному числу ЭМК и массового сбора информации. В настоящее время это выходят за рамки openEHR, но реально, большинство ЭМК реализуют методы защиты хоть в каком то виде.

В следующих разделах описывается, как openEHR поддерживает список политик.

h3. 7.3.3 Целостность

**Версионирование**
Основа, связанная с безопасностью - это поддержка openEHR целостности данных. Это главным образом обеспечивается моделью версионирования, указанной в пакете @change_control@ в "Common Information Model" и в "Extract Information Model". Изменений всей информации на основе версий является основной мерой обеспечения целостности информации в ЭМК и демографическом сервисе, так как содержимое не меняется физически, а только создаются новые версии. Все логические изменения и удаления, а также дополнения, физически реализованы в виде новых версий, а не изменения элементов существующей информации. Очевидно, что целостность информации будет зависеть от качества реализации, однако, простейшая из возможных реализаций (1 версия = 1 копия) может обеспечить очень хорошую безопасности из-за политики write-once.
Использование набора изменений, известный как "Contributions" в openEHR, обеспечивает дальнейшую единую целостность, соответствующию всем пунктам изменения, создания или удаления в момент одной сессии работы работы пользователя.
Модель версий openEHR указывает осуществлять  аудит записей для всех изменённых элементов, которые могут быть легко отслеживаться и/или содержащие дополнительные цифровые подписи проверки (например, старших сотрудников). Это означает, что каждый доступ на запись любого рода в любой части карты openEHR регистрируется с идентификацией пользователя, времени, причины и, возможно, других мета-данных. Версии подробно описано в разделе 8 на странице 42.

**Цифровая подпись**
OpenEHR даёт возможность устанавливать цифровую подписывать ЭМК  для  каждой версии объекта Versioned (т.е. для каждой версии любого логического элемента, например, списка лекарств, записи о поступлении и т.д.). Подписи создана как шифрованию приватным ключом (например, RSA-1) хэша (например MD5) из канонического представления (например, XML на основе схемы) утверждённой версии. Вероятным кандидатом для формата подписи и хеша строк в openEHR является формат сообщения OpenPGP (IETF RFC2440 [1]), из-за того, что спецификация открыта и самоописана.Использование формата RFC2440 не подразумевает использование распределённой инфраструктуры сертификатов PGP, или любой другой инфраструктуры сертификации; openEHR является агностиком по этому вопросу. Если нет инфраструктуры открытого ключа или её эквивалента, шифрование может быть опущено, в результате чего будет только цифровая подпись содержания. Подпись хранится в объекте Version, что позволяет ей удобно осуществляется в "EHR Extracts". Этот процесс показан на рисунке 22.

Подписание данных в системе управления версиями выступает в качестве проверки целостности (хеширование выполняет эту функцию), распознавание аутентификация (подпись выполняет эту функцию), а также однозначность данных. Чтобы защититься от взлома самого слоя сохранения версионости, подписи могут быть направлены на проверку в нотариальный сервис. Полностью безопасная система на основе цифровой подписи также требует сертифицированных открытых ключей, которые могут или не могут быть доступны в любой среде.

Одним из преимуществ цифровой подписи относительно небольших кусков EHR (одной версией), а не всей ЭМК или большой его части в том, что целостность элементов является более устойчивым к локальным повреждениям хранилища. 

!fig22.png(Изображение 22)!

fn1. IETF RFC 2440 - "http://www.ietf.org/internet-drafts/draft-ietf-openpgp-rfc2440bis-18.txt":http://www.ietf.org/internet-drafts/draft-ietf-openpgp-rfc2440bis-18.txt

h3. 7.3.4 Анонимность

Как описано выше в разделе 6.1, одной из особенностей ЭМК в openEHR является разделение самой ЭМК (клинической и административной) и демографической информации. Это в основном относится к ссылкам на пациента, а не лиц поставщика услуг, поскольку последние, как правило, являются достоянием гласности. Особый тип объекта, известный как @PARTY_SELF@  в openEHR используется ссылаться на объекта в ЭМК. Единственная информация, содержащаяся в экземпляре @PARTY_SELF@  является дополнительной внешней ссылкой. ЭМК в OpenEHR  может быть сконфигурирован 3 уровнями  разделения, путём контроля значения экземпляра @PARTY_SELF@ внешнего идентификатора, а именно:

* Нигде в ЭМК (т.е. все @PARTY_SELF@  экземпляра пусты). Это наиболее безопасный подход и означает, что связь между ЭМК и пациента должна быть сделана за пределами ЭМК, связав EHR.ehr_id и субъекта идентификатора. Такой подход предпочтителен в более открытой среде.
* Единожды только в объекте EHR Status (с учетом атрибутов), и нигде больше. Это также относительно безопасным, если объект ЭМК Статус защищены в некотором роде.
* В каждом экземпляре @PARTY_SELF@, это решение является разумным в безопасной среде, и удобным для копирования части записей локально.

Этот простой механизм обеспечивает базовую защиту от некоторых видов кражи информации или взлома, если используется должным образом. В самой безопасной ситуации, хакер, должен украсть не только ЭМК данные, но и отдельные демографические записи и связь между этими записями, которые могут быть расположены на разных машинах (что делает взломом сложнее). Взаимосвязь перекрёстных ссылок базы данных легко поддаётся шифрованию или для других механизмов защиты   безопасности.

h2. 7.4 Управление Доступом

**Обзор**

Контроль доступа полностью регулируется openEHR в объекте @EHR_ACCESS@ для ЭМК. Этот объект действует как шлюз для всех доступов к информации, и любое решение о доступе должно быть принято на основе политик и правил в нем содержащихся. Одна из проблем, с определением семантики объекта EHR Access в ЭМК является то, что в настоящее время нет опубликованных формальной, проверенную модели управления доступом к общей информации о здоровье. Различные усилия, предпринимаемые включая работу CEN EN13606 часть 4, ISO PMAC (Управление привилегиями и Контролем Доступа), проводимую в TC/215 на основе общих стандартов безопасности ISO / IEC 17799.
Несомненно, существуют экспериментальные и работающие у кого то реализации системы информационной безопасности для здравоохранения. В действительности, никаких крупномасштабных развёртываний общего ЭМК не существует, и поэтому решения по обеспечению безопасности на сегодняшний день по-прежнему только развиваются.
Поэтому архитектура openEHR рассчитана на наличие альтернативных моделей управления доступом, каждая из которых определяется подтипом класса @ACCESS_CONTROL_SETTING@ (Security IM). Такой подход означает, что упрощённая модель контроля доступа может быть определена и реализована изначально, а  более сложные моделями - в дальнейшем. "Схема" используется в любое время и всегда указывается в объекте EHR Access.

