h1. 14 Интеграция openEHR с другими системами

h2. 14.1 Обзор

Ввод и вывод информации из ЭМК это одни из самых простых требований, которые openEHR стремится удовлетворить. В системах с чистого листа и для данных создаваемых приложениями с графическим интерфейсом через API ЭМК openEHR, нет трудностей, если используются родные структуры и семантика openEHR. В большинстве других ситуаций необходимо учитывать наличие существующих источников и потребителей данных. В общем случае внешние или 'унаследованные' данные (здесь этот термин используется для удобства и не предполагает ничего о возрасте или качестве подразумеваемых систем) имеют отличный синтаксический и семантический формат от данных openEHR, и бесшовная конверсия требует участия обоих уровней.

Существующие источники и потребители данных включают реляционные базы данных, сообщения HL7v2, документы HL7 CDA и скорее всего данные по стандарту CEN EN13606. Сообщения HL7v2 скорее всего один из частых источников сообщений о патологии во множестве стран. EDIFACT сообщения - другой. Недавно сообщения HL7v2 были разработаны для направлений и даже для выписного эпикриза. Не все унаследованные системы стандартизованы; большинство госпитальных и систем общей практики имеют свои собственные частные модели данных и использование терминологии.

Основная потребность с учетом унаследованных данных - это возможность конвертации данных из множества взаимно несовместимых источников в единую, стандартизированную, пациенто-ориентированную ЭМК для каждого пациента, которую можно просматривать и извлекать данные в течение длительного времени. Это позволяет интегрировать записи общей практики и специализированные, диагнозы  и планы с результатами лабораторных исследований из различных источников, записей пациента, административной информации и так далее, для предоставления последовательной истории пациента.

В техническом плане приходится иметь дело со множеством несовместимостей. Нет гарантий соответствия области входящих транзакций и целевой структуры openEHR - входящий документ, например, может относиться ко множеству медицинских архетипов. Структуры обычно не совпадают, унаследованные данные (особенно сообщения) имеют более плоскую структуру чем определенные в архетипах. Использование терминологии существенно различается в существующих системах и сообщениях, и с этим также необходимо иметь дело. Типы данных также не соотносятся напрямую, так например, сопоставление между входящей строкой "110/80 mmHg" и целевой формой openEHR из двух объектов класса @DV_QUANTITY@, каждый из которых имеет свое значение и единицу измерения.

h2. 14.2 Интеграционные архетипы

Основание ключевого подхода к интеграционной проблеме - использование двух типов архетипов. До сих пор в этом документе термин "архетип" означал "разработанный" архетип, в общем случае медицинский, демографический или административный. Общие факторы для таких архетипов:

* они основаны на главной части базовой модели, конкретно подтипы класса Entry @OBSERVATION@, @EVALUATION@, @INSTRUCTION@ и @ACTION@;
* они сознательно разработаны с чистого листа группой специалистов и интегрированы в существующую библиотеку архетипов openEHR
* существует один архетип для каждого опознаваемого медицинского "понятия", такие как наблюдение, персона и т.д

Вторая категория архетипов - это "интеграционные" архетипы. Они характеризуются следующим:

* они основаны на тех же классах высокого уровня (@COMPOSITION@, @SECTION@ и т.д.), но используют подтип класса Entry @GENERIC_ENTRY@ (смотри Информационную модель EHR);
* they are designed to mimic the structure of legacy or existing data or messages; the design effort therefore is completely different, and is more likely to be done by IT or other technical staff who are familiar with the structures of the incoming data;
* there is one integration archetype per message type or identifiable source data that makes sense as a transaction to the EHR.

In the data integration environment, “designed” archetypes always define the target structures, coding and other semantics of data, while “integration” archetypes provide the means mapping of external data into the openEHR environment.

h2. 14.3 Data Conversion Architecture

The integration archetype-based strategy for importing data into an openEHR system, shown in FIGURE 39, consists of two steps.

p=. !39.png!

p=. *FIGURE 39* Data Integration using openEHR

Firstly, data are converted from their original syntactic format into openEHR @COMPOSITION/SECTION/GENERIC_ENTRY@ structures, shown in the openEHR integration switch. Most of the data will appear in the @GENERIC_ENTRY@ part, controlled by an integration archetype designed to mimic the incoming structure (such as an HL7v2 lab message) as closely as possible; @FEEDER_AUDIT@ structures are used to contain integration meta-data. The result of this step is data that are expressed in the openEHR type system (i.e. as instances of the openEHR reference model), and are immediately amenable to processing with normal openEHR software.

In the second step, semantic transformation is effected, by the use of mappings between integration and designed archetypes. Such mappings are created by archetype authors using tools. The mapping rules are the key to defining structural transformations, use of terminological codes, and other changes. Serious challenges of course remain in the business of integrating heterogeneous systems; some of these are dealt with in the Common IM document sections on Feeder systems.