h1. 6 Схема ЭМК в openEHR

h2. 6.1 Система ЭМК

Минимальная система ЭМК, основанная на openEHR, состоит из хранилища ЭМК, хранилища архетипов, терминологии (при наличии) и демографической/персональной информации, см. рисунок 13.

p=. !13.png!

p=. *Рисунок 13* Минимальная система ЭМК в openEHR.

Последнее может быть реализовано как в форме существующего PMI (patient master index) или другого справочника, так и в форме хранилища демографической информации openEHR. Репозиторий демографической информации openEHR может выступать как в качестве front-end к действующему PMI в системе, так и работать самостоятельно. В любом случае он выполняет две функции: стандартизацию структур демографической информации и версионирование. Электронная медицинская карта openEHR содержит ссылки на сущности в том репозитарии, который был настроен для использования в системе; электронная медицинская карта может быть настроена таким образом, чтобы не включать никаких демографических данных или содержать небольшое число идентифицирующих пациента данных. Принцип полного разделения данных медицинской карты и демографической информации в системе openEHR является одним из основополагающих, таким образом, ЭМК, взятая в отдельности содержит ничтожно мало или вообще не содержит информации, необходимой для однозначной идентификации пациента. Получаемые преимущества в системе  безопасности будут описаны ниже. В более совершенных системах ЭМК могут быть развернуты множество других служб(в частности, относящихся к сфере безопасности), как показано на рисунке 7.

h2. 6.2 Информационные структуры верхнего уровня

Как было показано, информационные модели openEHR, определяют информацию на различных уровнях детализации системы. Высокодетализированные структуры, описанные в типах Support и Data, используются в моделях Data Structures и Common, которые в свою очередь используются в ЭМК, EHR Extract, Demographic и других высокоуровневых моделях. Эти последние модели определяют высокоуровневые структуры openEHR, то есть содержат структуры, которые могут использоваться по отдельности и быть рассмотрены как эквивалент отдельных документов в документоориентированной системе. В информационных системах openEHR они представляют собой, преимущественно, высокоуровневые структуры, которые напрямую используются пользователем. Следующие высокоуровневые структуры можно рассматривать как наиболее важные:
* +Composition+ - фиксирующий блок ЭМК (см. тип @COMPOSITION@ в информационной модели EHR);
* +EHR Access+ - объект контроля доступа ко всей ЭМК (см. тип @EHR_ACCESS@ в информационной модели EHR);
* +EHR Status+ - суммарный статус ЭМК (см. тип @EHR_STATUS@ в информационной модели EHR);
* +Folder hierarchy+ - действует в качестве каталогизирующей структуры в ЭМК и демографическом сервисе (см. тип @FOLDER@ в информационной модели Common);
* +Party+ - различные подтипы, включая Actor, Role, и т.д., представляющие демографическую сущность с персональными и контактными данными (см. тип @PARTY@ и его подтипы в информационной модели Demographic);
* +EHR Extract+ - блок передачи данных между системами ЭМК, содержащий сериализованную ЭМК, демографические и другие данные (см. тип @EHR_EXTRACT@ в информационной модели EHR Extract).

Все сохраненные ЭМК openEHR, демография и другое содержание находятся внутри высокоуровневых информационных структур. Большинство из них видно на следующих рисунках.

h2. 6.3 Электронная медицинская карта

Структура ЭМК openEHR представляет относительно простую модель. Центральный объект ЭМК определяется по идентификатору ЭМК, содержит указатели на несколько типов структурированной и версионируемой информации, а также на список объектов контрибьюций (Contribution), действующих в качестве журнала изменений, производимых в ЭМК. Высокоуровневая структура ЭМК openEHR показана на рис. 14.

p=. !14.png!

p=. *Рисунок 14* Высокоуровневая структура ЭМК в openEHR.

На этом рисунке изображены следующие части ЭМК:
* __EHR__: корневой объект, идентифицируемый по глобальному уникальному идентификатору ЭМК;
* __EHR Access (версионируемый)__: объект, содержащий настройки контроля доступа к карте;
* __EHR Status (версионируемый)__: объект, содержащий различные статусы и управляющую информацию, а также опционально включающий идентификатор субъекта (т.е. пациента), в текущий момент связанного с данной картой;
* __Directory (версионируемый)__: опциональная иерархическая структура папок (Folders), которая может быть использована для логической организации композиций (Compositions);
* __Compositions  (версионируемый)__: контейнер всего клинического и административного содержимого карты;
* __Contributions__: учет изменений, производимых для каждого сохранения, сделанного в ЭМК. Каждая контрибьюция (Contribution) ссылается на одну или более версий (Versions) любого версионируемого элемента в ЭМК, которые были зафиксированы или аттестованы.

Внутренняя структура объектов Composition и Directory близка по соответствию уровням, описанным в таких международно-признанных моделях медицинской информации, таких стандартов как CEN EN13606 and HL7 CDA .

Логическая структура Composition детально изображена на рис. 15. На этом рисунке представлена иерархия уровней от композиции (Composition) до типов данных. В основе лежит 21 тип данных, которых достаточно для записи всех видов клинической и административной информации.

p=. !15.png!

p=. *Рисунок 15* Элементы объекта Composition системы openEHR.

h2. 6.4 Записи и "клинические утверждения"

*Подтип Entry*
Вся клиническая информация, создаваемая в ЭМК openEHR полностью выражается в записях "Entry". Entry - это одно логическое "клиническое утверждение"; она может быть записана как короткой описывающей фразой, так и содержать значительное множество данных (например полный результат микробиологического исследования, заключение о психиатрическом исследовании, сложный рецепт приема лекарств). Классы Entry являются наиболее важными в информационной модели ЭМК в openEHR с точки зрения фактического содержимого, так как они определяют семантику всей клинически-значимой информации, заносимой в карты. Подразумевается, что классы Entry архетипизируются и фактически, архетипы для Entry и подтипов составляют большинство архетипов определенных для ЭМК. 

Класс Entry openEHR показан на рис 16. На нем изображены 5 конкретных подтипов Entry: @ADMIN_ENTRY@, @OBSERVATION@, @EVALUATION@, @INSTRUCTION@ и @ACTION@, четыре из которых являются подтипами @CARE_ENTRY@.

p=. !16.png!

p=. *Рисунок 16* Модель класса Entry в openEHR (в информационной модели ЭМК).

Выбор этих типов основывается на процессе решения клинической задачи, показанного на рис. 17.

p=. !17.png!

p=. *Рисунок 17* Взаимоотношения типов информации в процессе поиска решения.

Этот рисунок изображает цикл создания информации как итеративный процесс поиска решения проблемы, применимый не только к клинической медицине, но и науке в целом. "Система" в целом состоит из двух частей: "система пациента" и "система клинического исследователя". Последняя состоит из персонала, оказывающего медицинскую помощь, и может включать пациента (в момент времени, когда пациент проходит осмотр или терапевтические мероприятия). Эта система несет ответственность за понимание состояния системы пациента и оказание медицинской помощи. Проблема решается путем проведения наблюдений, формирования мнения (гипотез) и предписывания определенных действий (инструкций), которые будут выполнены на следующем шаге. Следующий шаг, в свою очередь, может быть либо исследованием, либо вмешательством (направленным на решение проблемы), либо исполнением предписанных инструкций.

Эта модель процесса является синтезом проблемно-ориентированного метода записи ЭМК Lawrence Weed, в т.ч. последующих исследований этой области, включих модель Rector, Nowlan и Kay ==[7]== и "гипотетико-дедуктивной" модели умозаключений (см. ==[3]==). Однако выдвижение гипотезы и её проверка является не единственным успешным подходом, используемым профессиональными клиницистами. Практика показывает, что большинство (как правило старые и опытные клиницисты) основываются на распознавании общих признаков и применении лечебных планов, использованных до этого с подобными пациентами, либо прототипными моделями. Модель процесса работы исследователя, использованная в openEHR совместима с обоими когнитивными подходами, так как она не описывает как формируется предположение, не подразумевает определенное число итераций, которые приведут процесс к заключению, и даже не требует выполнения всех шагов, представленных в цикле(например, врачи общей практики часто предписывают что-либо без постановки точного диагноза). Следовательно модель Entry системы openEHR не навязывает процессную модель, а всего лишь предоставляет возможные типы информации, которые могут возникнуть.

*Онтология типов Entry*
В клиническом мире практикующие врачи думают в терминах не только пяти типов данных, соответствующих подтипам Entry, описанным выше. Существует много подтипов каждого из этих типов, некоторые из которых показаны в  онтологии на рисунке 18.

p=. !18.png! 

p=. *Рисунок 18* Онтология записываемой информации.

Здесь ключевыми высокоуровнемыми категориями являются "информация о медицинской помощи" и "административная информация". Первая включает в себя все формулировки, которые могут быть записаны во время лечебно-диагностического процесса, и состоит из важных подкатегорий, являющихся основой модели Entry, а именно: наблюдение, мнение, инструкция, действие(разновидность наблюдения), которые сами по себе соответствуют прошлому настоящему и будущему. Категория административной информации включает в себя информацию, которая вырабатываются не в процессе непосредственно медицинского ухода, а относится к организационной информации, например, время следующего посещения врача или госпитализация. Эта информация не о лечебном процессе, а о материально-техническом обеспечении оказания медицинских услуг.

Несмотря на разнообразие, каждая из категорий, представленная в виде листа дерева, показанного на этом рисунке, является подкатегорией одного из типов процесса, а, следовательно, и одним из подтипов модели Entry.

Категорий онтологии представляются с помощью архетипов, предназначенных для выражения определенной информации (например, оценка риска) в отношении конкретного подтипа Entry (в данном случае, Evaluation). В системе, где Entry моделируются с учетом подтипам, фактора времени и определенности, отсутствует опасность неправильного определения различных видов Entry Обратите внимание, что даже если онтология, изображеная на рисунке 18 не является правильной (несомненно, это не так), архетипы будут построены с учетом идеи о том, какими в действительности должны быть эти категории.

*Статус клинического утверждения и отрицание*
Присваивание "статуса" сохраняемым элементам - это хорошо известная проблема записи клинической информации. Виды статусов могут включать  "фактическое значение Р" (Р обозначает некоторое явление), "семейная история P", "риск P", "угроза P", а также отрицание любого из этих статусов, то есть «не/нет P", "нет истории P" и т.д. Подробный анализ таких статусов, показывает, что они вовсе не являются "статусами", а представляют собой разные категории информации, что соответствует онтологии, изображенной на рис. 18. В целом, логические отрицания обрабатываются с помощью архетипов "исключений", назначенных для соответствующего типа Entry. Например, утверждение "нет аллергии" может быть смоделировано с помощью архетипа Evaluation (оценка), который описывает аллергии исключенные для этого пациента. Еще одна группа типов формулировок, которая может быть перепутана в системах, не должным образом моделирующих категории информации касающиеся вмешательства, например, "замена тазобедренного сустава (5 лет назад)", "замена тазобедренного сустава (рекомендуется)", "замена тазобедренного сустава (запланирована на следующий вторник 10 часов утра)".

Все эти разновидности формулировок в недвусмысленной, точной форме относятся непосредственно к одному из типов Entry в openEHR, гарантируя, что запрос к ЭМК не отдаст неверные данные, такие как утверждения об угрозах или риске, в то время как были запрошены информация о наблюдении за явлением.

Более подробная информация о модели клинической информации openEHR  приводятся в документе EHR IM, в секции Entry.

h2. 6.5 Управление медицинскими вмешательствами

Ключевой частью процесса исследования показанного на рисунке 17, да и в целом в здравоохранении, является медицинское вмешательство. Описание и управление вмешательствами (будь то простейшие рецепты или сложные хирургические и терапевтические процедуры) является трудной проблемой для информационных систем, поскольку они находятся в "будущем" (это означает, что действия во вмешательстве должны выражаться с помощью спецификации времени, используя ветвления и циклы, а не простой линией времени наблюдений), неожиданные события могут изменить положение вещей (например, реакция пациента на лекарства) и статус данного вмешательства может быть трудно отслеживаемым, особенно в распределенных системах. Однако, с точки зрения медицинских работников, желание узнать, что за лекарства принимает пациент, с каких пор и каковы изменения, является основополагающим.

OpenEHR подходит к решению этих проблем с помощью записей типа @INSTRUCTION@, в которых составной элемент @ACTIVITY@ используется для указания мероприятий в будущем, и записей подтипа @ACTION@, для учета того, что уже произошло. Такой моделью обеспечивается несколько важных возможностей:
* единый гибкий способ моделирования всех медицинских вмешательств, будь то единичный прием медикаментов или комплексная терапия в стационаре;
* способ узнать состояние любого вмешательства, на основе стандартной машины состояний, показанной на рис. 19; это позволяет строить запросы к ЭМК пациента унифицированным способом, так, чтобы получать "все активные препараты", "все приостановленые медицинские вмешательства" и т.д.;
* способ отображения конкретных шагов медицинского процесса в стандартную машину состояний, позволяющую медицинским работникам определять и просматривать вмешательств в понятных для них терминах;
* поддержка автоматизированных процессов.

В сочетании с широчайшими возможностями версионирования openEHR, конструкции типа Инструкция/Действие позволяют клиницистам, использующим ЭМК, описывать и управлять медицинскими вмешательствами в распределенных средах.

p=. !19.png!

p=. *Рисунок 19* Стандартная машина состяния инструкций в openEHR.

h2. 6.6 Время в ЭМК

Фактор времени хорошо известная и сложная проблема моделирования в медицинской информации. В openEHR, время, являющееся побочным продуктом процесса исследования (например, время взятия проб; время измерения показаний, время медицинских бизнес-событий, время занесения данных), описано выше и конкретно смоделированы; другие же временные измерения, специфичные для конкретного содержания (например, дата возникновения болезни, дата разрешения) моделируются с помощью архитипизации атрибутов данных. На следующем рисунке показано типичное соотношение времени к процессу наблюдения, и соответствующие атрибуты в рамках базовой модели openEHR. Обратите внимание, что при различных сценариях, таких как  консультация врача общей практики, радиологическое заключение и др., временные отношения могут быть совершенно разными, чем те, что показаны на рисунке. "Время" подробно описано в документе "Информационная модель ЭМК (EHR Information Model)".

p=. !20.png!

p=. *Рисунок 20* Время в ЭМК.

h2. 6.7 Язык

В некоторых ситуациях в ЭМК может использоваться более чем один язык. Это может быть связано с перевозкой пациентов заграницу (распространено среди скандинавских стран, между Бразилией и её северными соседями), или с лечением пациента во время путешествия, или с тем, что используется несколько языков в медицинской среде.

Язык обрабатывается следующим образом в EHR openEHR. Язык по умолчанию для всей ЭМК определяется из языка операционной системы. При необходимости эти настройки могут быть включены в объект EHR_status.

Затем, выбранный язык в обязательном порядке указывается в соответствующих __language__ атрибутах в двух местах в данных ЭМК, а именно в Compositions и Entries (например, в Observations и т.д.). Это позволяет использовать в ЭМК как композиции (Compositions) на различных языках в EHR, так и записи(Entry) на разных языках в составе той же композиции (Composition). Кроме того, в Entries, можно заполнять атрибут "язык" текстовых и закодированных текстовых элементов, если они записаны на языке, отличающимся от языка содержащего их Entry, любо если эти типы используются в других не-Entry структурах, в которых язык не указывается.

Использование этих функций, в основном может понадобиться в связи с переводом, хотя может и произойти в некоторых случаях врачебного приема в действительно многоязычной среде. В первом случае, некоторые части ЭМК, например Compositions, будут переведены до или после клинического приема чтобы сделать доступной информацию, записанную на основном языке ЭМК. Факт перевода (как и любые другие взаимодействия с ЭМК) вызовет изменения в карте, в виде создания новой версии. Новые переводы могут быть легко записаны в новой ветке версий, отходящей от версии, к которой сделан перевод. Это не является обязательным, но предоставляется удобным способом  хранения переводов, что бы не заменят первоначальное содержание.