h1. 12 Терминология в openEHR

h2. 12.1 Обзор

Архетипы openEHR обеспечивают мощный способ определения значения клинических и связанных с ними данных и соединения, или "связывания" данных с признанными терминологиями, такими как LOINC, ICDx, ICPC, SNOMED-CT и многими другими, используемыми в здравоохранении. Терминология используется в openEHR одним из следующих способов:

* Значения кодированных атрибутов в эталонной модели определяется терминологией "openEHR". 
* Каждый архетип содержит свою собственную внутреннюю терминологию, определяющую значение каждого элемента.
* Связи с внешними терминологиями могут быть включены в архетип, что позволяет отображать их непосредственно на термины, или на запросы, возвращающие определенные наборы значений. 
* Выполнение запросов к ЭМК с использованием внешних терминологий поддерживается при помощи связывания архетипов.

В следующих разделах описаны эти функции.

h2. 12.2 Терминология для поддержки эталонной модели

openEHR имеет свою собственную небольшую терминологию и кодированные множества, используемые для предоставления совокупности значений множества атрибутов в эталонной модели. Кодированные множества используются для выражения хорошо известных международно-стандартизированных списков кодов, где коды сами по себе имеют осмысленные значения, например ISO 3166 коды стран (“au”, “cn”, “pl” и т.д.). Шесть таких кодированных множеств используются различными атрибутами в эталонной модели. Тип каждого элемента множества - @CODE_PHRASE@ (openEHR тип, используемый для представления кода термина). 

Для других кодированных атрибутов эталонной модели, таких как @PARTICIPATION@.__function__, openEHR терминология занимает более традиционный путь в моделировании терминологии, и группирует множества значений, используя не имеющие значения коды и категории. Такие атрибуты всегда имеют тип @DV_CODED_TEXT@; сам код содержится в атрибуте __defining_code__.

OpenEHR терминология описана в документе openEHR Terminology[1], включая вычисляемые выражения, доступные на странице терминологии openEHR[2].

fn1.  http://svn.openehr.org/specification/TRUNK/publishing/architecture/terminology.pdf

fn2.  http://svn.openehr.org/specification/TRUNK/publishing/architecture/computable/terminology/terminology.html

h2. 12.3 Архетип "Внутренняя терминология"

Архетипы содержат свои собственную локальную терминологию (находится в разделе «онтология» архетипа). Использование внутренних множеств термин допустимо, когда нет структуры терминов (т.е. между ними нет отношений), и когда синонимы не являются важными. Таким образом, использование ограничивается небольшим простым списком терминов. Преимуществами использования внутренних по отношению к архетипу терминов, за исключением вычислительной эффективности упомянутой выше, являются:

* Запросы могут быть основаны на одних архетипах, что не требует взаимодействия с терминологическим сервером;
* Перевод терминов производится внутри явного тематического контекста (так как каждый архетип составлен по конкретной теме) и, следовательно, имеет гораздо больше шансов быть точным;
* Многие условия, требуемые в архетипах не доступны даже в очень больших терминологиях;
* Люди могут обмениваться данными на основе архетипов, даже если они не обмениваются терминологией.

Понятно, однако, что многие архетипы требует подключения к внешней терминологии для обеспечения всех преимуществ автоматической обработки; это описано в следующем разделе.

Внутренняя терминология принимает форму набора {код, текст, описание} семантических определений для каждого узла архетипа структуры. Каждый такой срок определяется кодом “at” (термин архетипа), например, [at0012]. Каждый код, определенный локально в архетипе, используется для одной из двух целей:

* Либо семантически определять узлы данных архетипа (т.е. именовать данные),
* Либо обеспечить множества значений для атрибутов листьев.

Например, локальные коды в архетипе "результат Апгар"[1] могут содержать условия "событие 1-й минуты" и "событие 2-й минуты". Эти коды связаны с эталонной моделью узлов в разделе архетипа, называемом «определение». В примере Апгар, два кода (скажем, [at0003] и [at0026]) будут отображены на узлы типа @EVENT@ (пакет @rm.data_structures.history@) эталонной модели, как показано на рисунке 34. Здесь представлено такое отображение, которое является основой для архетипизированных путей: архетипизированный путь - это просто альтернативный шаблон представления имен атрибутов и кодов узлов эталонной модели.

fn1.  Апгар является основной мерой здоровья новорожденных, проводится 2 или 3 раза после родов и представляется в виде шкалы от 0 до 10 баллов.

p=. !fig34.png!

p=. *Рисунок 34* определение архетипа Апгар (выдержка)

Второй способ использования местных кодов - качестве значений. На рисунке 34, @ELEMENT@ узла, определяемый кодом [at0005], имеет тип @ORDINAL@, в качестве ограничения своих значений. Этот тип может принимать значения 0, 1 или 2. Каждое из этих значений кодируется при помощи кодов [at0006], [at0007] и [at0008]. Выдержка из онтологии архетипа, отображающая эти термины, показана на рисунке 35.

p=. !fig35.png!

p=. *Рисунок 35* Раздел "онтология" архетипа Апгар (выдержка)

h2. 12.4 Привязка к внешней терминологии

*Привязка кодов внешней терминологии к кодам архетипа*
Первая разновидность связывания является способностью архетипа отображать внутренний код на код внешнюю терминологию. Привязки сгруппированы на основе внешней терминологии, что позволяет любому внутреннему коду архетипа быть связанным с кодами нескольких терминологий. В первую очередь, при создании отображений терминологий, необходимо соблюдать осторожность, в следствие того, что охват, предоставляемый внешними терминологиями, как правило, является неполным, и установленные связи могут быть приближенными. В примере, показанном на рисунке 35, два пути показаны как связи с LOINC кодами шкалы Апгар 1-й и 2-й минуты соответственно. В этом примере, весь путь связан, а это означает, что отображение имеется только между [at0025] и [LNC205::9272-6], когда [at0025] присутствует в первом пути; когда этот код встречается во втором пути, происходит отображение на другой LOINC код. Таким образом, так называемые, "предкоординатные" коды от внешней терминологии могут быть сопоставлены с концепцией архетипа openEHR.

Связи могут быть установлены между атомарными внутренними кодами и внешними кодами, в этом случае смысл в том, что отображение происходит  всегда, независимо от того, сколько раз внутренний код использовался в архетипе.

*Привязка терминологического множества значений к архетипам*
Определение наборов значений для атрибутов, определенных в архетипах, является важным требованием в отношении терминологии. Иногда множества значений определяются локально в рамках архетипа, потому что термины не доступны в опубликованных терминологиях, или может быть слишком трудно конкретно определить таковые, в связи с отсутствием инкапсуляции. Например, термины "никаких усилий", "умеренные усилия" и "плач" являются распознаваемыми значениями атрибута "дыхание" результата теста по шкале Апгар[1]. В контексте Апгар / дыхание, значение полностью ясно, однако очевидно, что термин с такой категорией в терминологии подобной SNOMED-CT должен быть предустановлен. Более того, кажется, мало смысла с практической точки зрения в отображении SNOMED термина "без усилий", так как запрос элементов, содержащих "без усилий" вряд ли будет полезна в клиническом контексте.

Для многих других видов атрибутов, однако, термины являются подходящим источником значений. Часто такие атрибуты определяют виды реальных явлений мира, таких как виды болезней и группы крови, а не качества такого явления, как "без усилий", или "синий". Для этих атрибутов требуются другие виды соединения с внешней терминологией. Это достигается таким же образом, как и для привязки одного кода:определяется внутренний код, в данном случае  “ac” код(“ac” = архетип ограничений), и связывается с запросами к одной или нескольким внешним терминологиям, результатом которых было бы множество значений (возможно структурированное) из этой терминологии. Логическая схема показана на рисунке 36, где кодируется значение атрибута "фенотип группы крови".

В настоящее время не существует стандарта для таких запросов. Это не влияет на архетипы непосредственно, так как они просто содержат __ identifier__ для запросов, сам запрос определяется в "сервере терминологических запросов". Результатом этого запроса является список фенотипов групп крови, которые могут выглядеть, как показано в нижней части рис. 36.

fn1.  См. архетип Апгар - http://svn.openehr.org/knowledge/archetypes/dev/html/en/openEHR-EHR-OBSERVATION.apgar.v1.html

h2. 12.5 Выполнение запросов с использованием внешней терминологии

Выполнение запросов к данным ЭМК часто упоминается как основная полезная черта терминологии по отношению к медицинской информации. Существует множество подходов для работы с отображениями, определенными в архетипах, однако в первую очередь необходимо понимать семантику предназначения запроса. Рассмотрим запрос "аденокарцинома" из карты пациента. SNOMED-CT включает в себя 63 термина, начинающихся с "аденокарцинома" (и 171 терминов, которые включают слово в качестве второй части фразы), некоторые из которых - потомки общего родительского термина. Тем не менее, не __все__ термины имеют одного общего родителя; выборка должна быть сделана из тех терминов, которые соответствуют цели запроса. Если это так, то чтобы найти любой предыдущий диагноз "аденокарцинома", то термины должны быть включены по крайней мере в форме "аденокарцинома легких" [snomed-ct::254626006] или "... печени". Они находятся в иерархии "поиск клинического решения", поэтому использование этих  терминов должно исключить совпадение с другими видами использования этих же терминов в карте, например, "страх аденокарциномы" или "минимальный риск аденокарциномы». Такое правильное соответствие полностью зависит от правильного использования SNOMED-CT терминов, в первую очередь, программным обеспечением и / или  данными, создаваемыми пользователем. Легко представить себе приложение, которое сохраняет данные (в том числе openEHR данные) в виде двух пар имя / значение: {"Основной диагноз", [snomed-ct::35917007]("аденокарцинома")} и {"местоположение" , "легкие"}. Запросы с использованием "аденокарциномы легких" [snomedct::254626006] не дадут результатов, даже если это точное значение данных. Приведенные данные, как таковые, не являются ошибочными, но урок ясен: +процессы кодирования данных и использования кодов в запросах должны руководствоваться общими моделями+, в противном случае нет никакой надежды на надежную обработку данных.

p=. !fig36.png!

p=. *Рисунок 36* Ограничивающее связывание архетипа

В openEHR подходе может использоваться выполнение запросов на основе пути (например):
"@EVALUATION@ основана на архетипе @problem-diagnosis-histological_staging@" со значением в пути @/data/items[at0002.1.1]/value/code@ (гистологическая диагностика) равно-или-относится-к-подкатегории "поиск клинического решения" и равно-или-относится-к-подкатегории "аденокарцинома".

Здесь предполагается, что значение на этом пути было __изначально__ ограничено архетипом, из которого берется путь, чтобы соответствовать отношению {является "поиск клинического решения" и является "ненормальная морфологическая масса"}. Любой результат поиска аденокарциномы легких таким образом должен относится к полученной иерархии категоризации; другие термины "аденокарцинома" не могут быть ошибочно использованы в этом случае.

Однако, даже если архетип не ограничил значение таким образом, тот же запрос, который искал любые термины "аденокарцинома" на том же самом пути, может быть разумно использован, чтобы найти "предыдущие диагнозы аденокарциномы», так как это единственный вариант использования архетипа. Аналогичным образом, запросы на основе пути архетипа могут быть использованы для разграничения других потенциальных неясностей, описанных в разделе 6.4 на стр. 28.