h1. 10 Архетипы и Шаблоны

h2. 10.1 Обзор

В подходе двухуровневого моделирования определение информационных структур происходит на двух уровнях. Нижний уровень базовой модели представляет собой устойчивую объектную модель, на которой можно построить программное обеспечение и создать данные. Понятия базовой модели openEHR являются инвариантами и включают в себя такие объекты как Composition, Section, Observation и различные типы данных, такие как Quantity и Coded text. Верхний уровень состоит из определений предметной области в форме архетипов и шаблонов. На этом уровне определяются такие понятия как “измерение артериального давления ”, “заголовки SOAP”, “результат исследования гемоглобина”.
 
Вся информация соответствующая базовой модели openEHR, другими словами коллекция информационных моделей, является “архетипизируемой”, что означает, что создание и изменение содержимого и последующий запрос данных контролируется архетипами. Архетипы отделены от данных и хранятся в своем собственном репозитории. Каждый репозиторий в конкретном месте обычно включает в себя архетипы из широко известных доступных библиотек. Архетипы подключаются во время исполнения через шаблоны, которые определяют конкретную группу архетипов для использования в конкретной задаче, обычно относящейся к экранной форме.

Архетипы являются экземплярами модели архетипов, которая определяет язык описания архетипов; синтаксический эквивалент модели это Archetype Definition Language, ADL. Эти понятия определены в openEHR Archetype Object Model (AOM) и в документах ADL соответственно. Каждый архетип является набором ограничений на базовую модель, определяющим подмножество объектов, которые считаются соответствующими понятию, описываемому архетипом, например “результат лабораторного исследования”. Таким образом, можно рассматривать архетип как инструкцию от конструктора LEGO® (например, для трактора), которая определяет набор кубиков LEGO® для сборки трактора. Архетипы гибки; один архетип включает множество вариаций так же, как и инструкция может включать множество вариантов для одного простого объекта. С точки зрения математики, архетип является эквивалентом запросу на языке F-logic [5]. Архетипы являются универсальными, повторно используемыми и составными. Для задач получения и проверки данных они используется во время исполнения через шаблоны.

Шаблон в openEHR является описанием, которое определяет дерево из одного и более архетипов, каждый из которых ограничивает различные типы базовой модели, такие как Composition, Section, подтипы Entry и так далее. Таким образом, несмотря на то, что скорее всего будут архетипы для таких понятий как “результат биохимического анализа” и “заголовки SOAP”, шаблоны используются для объединения архетипов в документы. Шаблоны обычно соотносятся с экранными формами, напечатанными отчетами и в общем случае с блоками информации, которые могут быть получены или отправлены и могут использоваться для определения содержимого сообщений. Обычно они разрабатываются и используются локально, в то время как архетипы используются широко. 

Во время исполнения шаблоны используются для формирования структур данных, проверки вводимых данных на соответствие ограничениям, определенным в архетипах, которые данный шаблон включает.